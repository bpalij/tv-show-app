(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,a){e.exports=a(35)},28:function(e,t,a){},33:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),c=a.n(o),l=(a(28),a(12)),s=a(9),i={page:1,pages:0,disableFirst:!0,disableLast:!0},u={query:"",year:"",sort:"trending"},d=Object(s.c)(Object(s.b)({disableInput:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"START_LOAD_DATA":return!0;case"LOADED_DATA":return!1;default:return e}},data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADED_DATA":return t.data.data;default:return e}},headers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADED_DATA":return t.data.headers;default:return e}},images:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADED_DATA":return t.data.images;default:return e}},paginator:function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"LOADED_DATA":return{page:(e=+n.data.headers["x-pagination-page"])||1,pages:(t=+n.data.headers["x-pagination-page-count"])||0,disableFirst:!("number"===typeof e&&e&&!(e<=1)),disableLast:!("number"===typeof t&&"number"===typeof e&&e&&t&&!(e>=t))};default:return a}},filters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGED_PARAMS":return t.data;default:return e}},err:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ERROR_MESSAGE":return t.data;default:return e}}}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),p=a(3),h=a(4),f=a(8),m=a(6),y=a(7),b=a(20),v=a(21),g=function(e){return Object(v.a)(e.entries()).reduce(function(e,t){var a=Object(b.a)(t,2),n=a[0],r=a[1];return e["".concat(n)]=r,e},{})},E=(a(33),a(22)),w=a(5),k=a(10),D=a.n(k),O=a(16);function x(e){return A.apply(this,arguments)}function A(){return(A=Object(O.a)(D.a.mark(function e(t){var a,n,r;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.themoviedb.org/3/find/".concat(t.show?t.show.ids.imdb:t.ids.imdb,"?api_key=").concat("d0bf19a4025fab46f7bfe6f5f2e4a011","&language=en-US&external_source=imdb_id"));case 3:return a=e.sent,e.next=6,a.json();case 6:if(n=e.sent,r=n.tv_results[0].poster_path){e.next=12;break}throw new Error("no img");case 12:return e.abrupt("return","https://image.tmdb.org/t/p/original/".concat(r));case 13:e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(0),e.abrupt("return","");case 18:case"end":return e.stop()}},e,null,[[0,15]])}))).apply(this,arguments)}function j(){return(j=Object(O.a)(D.a.mark(function e(t){var a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Promise.all(t.map(function(e){return x(e)})),e.abrupt("return",a);case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}for(var _=function(e){return j.apply(this,arguments)},T=[""],C=(new Date).getFullYear();C>=1800;C-=1)T.push("".concat(C));var L=[{value:"trending",text:"Trending"},{value:"popular",text:"Popular"},{value:"played/weekly",text:"Most played (weekly)"},{value:"played/monthly",text:"Most played (monthly)"},{value:"played/yearly",text:"Most played (yearly)"},{value:"played/all",text:"Most played (all)"},{value:"watched/weekly",text:"Most watched (weekly)"},{value:"watched/monthly",text:"Most watched (monthly)"},{value:"watched/yearly",text:"Most watched (yearly)"},{value:"watched/all",text:"Most watched (all)"},{value:"collected/weekly",text:"Most collected (weekly)"},{value:"collected/monthly",text:"Most collected (monthly)"},{value:"collected/yearly",text:"Most collected (yearly)"},{value:"collected/all",text:"Most collected (all)"},{value:"anticipated",text:"Most anticipated"}];var S=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(m.a)(t).call(this,e))).state={query:"",year:"",sort:"trending"},a.buttonClick=a.buttonClick.bind(Object(w.a)(a)),a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"buttonClick",value:function(){var e,t,a,n=this.props,r=n.changeParams,o=n.startLoadData,c=n.loadedData,l=n.setError,s=Object(E.a)({},this.state);r(s),o(),fetch("https://api.trakt.tv/shows/".concat((a=s,a.query&&a.year?"".concat(a.sort,"?query=").concat(a.query,"&years=").concat(a.year):a.query?"".concat(a.sort,"?query=").concat(a.query):a.year?"".concat(a.sort,"?years=").concat(a.year):"".concat(a.sort))),{headers:{"Content-Type":"application/json","trakt-api-version":"2","trakt-api-key":"".concat("fb2fd0bf6a1c06b107d7ac6e8cdc34d97f16cd0a7ed6f0e2d7a4dfeba35d8e0c")}}).then(function(t){if(t.ok)return e=g(t.headers),t.json();throw new Error("Error ".concat(t.status,": ").concat(t.statusText))}).then(function(e){return t=e,_(e)}).then(function(a){c(t,e,a)}).catch(function(e){l("Error '".concat(e,"', try to reload page"))})}},{key:"render",value:function(){var e=this,t=this.state,a=t.query,n=t.year,o=t.sort,c=this.props.disableInput;return r.a.createElement("form",{className:"form-table-width main-form"},r.a.createElement("div",{className:"form-flex-line"},r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:"query-input"},"Query",r.a.createElement("input",{type:"text",id:"query-input",value:a,disabled:c,onChange:function(t){e.setState({query:t.target.value})}}))),r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:"year-select"},"Year",r.a.createElement("select",{id:"year-select",value:n,disabled:c,onChange:function(t){e.setState({year:t.target.value})},onBlur:function(t){e.setState({year:t.target.value})}},T.map(function(e){return r.a.createElement("option",{value:e,key:e},e)})))),r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:"sort-select"},"Sort",r.a.createElement("select",{id:"sort-select",value:o,disabled:c,onChange:function(t){e.setState({sort:t.target.value})},onBlur:function(t){e.setState({sort:t.target.value})}},L.map(function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.text)}))))),r.a.createElement("div",{className:"form-flex-right-button"},r.a.createElement("div",{className:"form-item"},r.a.createElement("button",{type:"button",onClick:this.buttonClick,disabled:c},"Change"))))}}]),t}(n.Component);var M=function(e){var t=e.headers,a=e.data,n=e.images;return r.a.createElement("table",{className:"form-table-width main-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Number"),r.a.createElement("th",null,"Poster"),r.a.createElement("th",null,"Show name"),r.a.createElement("th",null,"Watchers"),r.a.createElement("th",null,"Year"))),r.a.createElement("tbody",null,a.map(function(e,a){return r.a.createElement("tr",{key:e.show?e.show.ids.trakt:e.ids.trakt},r.a.createElement("td",null,function(e,t){var a=+e["x-pagination-page"],n=+e["x-pagination-limit"],r=+e["x-pagination-page-count"];return a&&n&&r?(a-1)*n+(t+1):""}(t,a)),r.a.createElement("td",null,r.a.createElement("img",{src:n[a],alt:"".concat(e.show?e.show.title:e.title," poster")})),r.a.createElement("td",null,e.show?e.show.title:e.title),r.a.createElement("td",null,e.watchers),r.a.createElement("td",null,e.show?e.show.year:e.year))})))};var N=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(m.a)(t).call(this,e))).loadPage=a.loadPage.bind(Object(w.a)(a)),a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"loadPage",value:function(e){var t,a,n=this.props,r=n.loadedData,o=n.startLoadData,c=n.filters,l=n.setError;o(),fetch("https://api.trakt.tv/shows/".concat(function(e,t){return e.query&&e.year?"".concat(e.sort,"?query=").concat(e.query,"&years=").concat(e.year,"&page=").concat(t):e.query?"".concat(e.sort,"?query=").concat(e.query,"&page=").concat(t):e.year?"".concat(e.sort,"?years=").concat(e.year,"&page=").concat(t):"".concat(e.sort,"?page=").concat(t)}(c,e)),{headers:{"Content-Type":"application/json","trakt-api-version":"2","trakt-api-key":"".concat("fb2fd0bf6a1c06b107d7ac6e8cdc34d97f16cd0a7ed6f0e2d7a4dfeba35d8e0c")}}).then(function(e){if(e.ok)return t=g(e.headers),e.json();throw new Error("Error ".concat(e.status,": ").concat(e.statusText))}).then(function(e){return a=e,_(e)}).then(function(e){r(a,t,e)}).catch(function(e){l("Error '".concat(e,"', try to reload page"))})}},{key:"render",value:function(){var e=this,t=this.props,a=t.disableInput,n=t.paginator;return r.a.createElement("div",null,r.a.createElement("button",{type:"button",disabled:a||n.disableFirst,onClick:function(){e.loadPage(1)}}," << First "),r.a.createElement("button",{type:"button",disabled:a||n.disableFirst,onClick:function(){e.loadPage(+n.page-1||1)}}," < Previous ")," ".concat(n.page," of ").concat(n.pages," "),r.a.createElement("button",{type:"button",disabled:a||n.disableLast,onClick:function(){e.loadPage(Math.min(+n.page+1||0,+n.pages||0)||1)}}," Next > "),r.a.createElement("button",{type:"button",disabled:a||n.disableLast,onClick:function(){e.loadPage(+n.pages||1)}}," Last >> "))}}]),t}(n.Component);var q=function(e){var t=e.err;return r.a.createElement("div",{className:"error-message"},t)},P=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e,t,a=this.props,n=a.loadedData,r=a.setError;fetch("https://api.trakt.tv/shows/trending",{headers:{"Content-Type":"application/json","trakt-api-version":"2","trakt-api-key":"".concat("fb2fd0bf6a1c06b107d7ac6e8cdc34d97f16cd0a7ed6f0e2d7a4dfeba35d8e0c")}}).then(function(t){if(t.ok)return e=g(t.headers),t.json();throw new Error("Error ".concat(t.status,": ").concat(t.statusText))}).then(function(e){return t=e,_(e)}).then(function(a){n(t,e,a)}).catch(function(e){r("Error '".concat(e,"', try to reload page"))})}},{key:"render",value:function(){var e=this.props,t=e.headers,a=e.data,n=e.images,o=e.disableInput,c=e.changeParams,l=e.startLoadData,s=e.loadedData,i=e.paginator,u=e.filters,d=e.err,p=e.setError;return r.a.createElement("div",{className:"flexbox-center"},!d&&r.a.createElement(S,{disableInput:o,changeParams:c,startLoadData:l,loadedData:s,setError:p}),!d&&r.a.createElement(M,{headers:t,data:a,images:n}),!d&&r.a.createElement(N,{paginator:i,startLoadData:l,loadedData:s,filters:u,disableInput:o,setError:p}),!d&&r.a.createElement("div",{className:"final-whitespace"}),d&&r.a.createElement(q,{err:d}))}}]),t}(n.Component),R={startLoadData:function(){return{type:"START_LOAD_DATA"}},loadedData:function(e,t,a){return{type:"LOADED_DATA",data:{data:e,headers:t,images:a}}},changeParams:function(e){return{type:"CHANGED_PARAMS",data:e}},setError:function(e){return{type:"ERROR_MESSAGE",data:e}}},I=Object(l.b)(function(e){return{disableInput:e.disableInput,data:e.data,headers:e.headers,images:e.images,paginator:e.paginator,filters:e.filters,err:e.err}},R)(P);var F=function(){return r.a.createElement(l.a,{store:d},r.a.createElement(I,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[23,1,2]]]);
//# sourceMappingURL=main.4829da72.chunk.js.map